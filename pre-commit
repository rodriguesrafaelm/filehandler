#!/usr/bin/env bash
# File generated by pre-commit: https://pre-commit.com
# ID: 138fd403232d2ddd5efb44317e38bf03

# start templated
INSTALL_PYTHON=/home/pbotelho/Documentos/myV/bin/python3
ARGS=(hook-impl --config=.pre-commit-config.yaml --hook-type=pre-commit)
# end templated

# Script para executar testes e verificar a cobertura antes de cada commit

# Roda os testes
pytest

# Verifica a cobertura
coverage run -m pytest

# Checa a cobertura mínima definida no .coveragerc
coverage html
#xdg-open coverage_html_report/index.html
xdg-open https://app.codecov.io/gh/pedrobotelhosilva/filehandler/tree/main
# Saída do script dependendo do resultado dos comandos acima
exit $?

HERE="$(cd "$(dirname "$0")" && pwd)"
ARGS+=(--hook-dir "$HERE" -- "$@")

if [ -x "$INSTALL_PYTHON" ]; then
    exec "$INSTALL_PYTHON" -mpre_commit "${ARGS[@]}"
elif command -v pre-commit > /dev/null; then
    exec pre-commit "${ARGS[@]}"
else
    echo '`pre-commit` not found.  Did you forget to activate your virtualenv?' 1>&2
    exit 1
fi
